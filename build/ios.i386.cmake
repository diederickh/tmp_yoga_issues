set(ios_root  "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/")
set(ios_arch "i386")
set(ios_version "10.3")
set(CMAKE_OSX_SYSROOT "${ios_root}SDKs/iPhoneSimulator${ios_version}.sdk/")
set(CMAKE_OSX_ARCHITECTURES "${ios_arch}" CACHE STRING "Cache architectures so it's used by try_compile")
set(CMAKE_C_COMPILER /usr/bin/clang)
set(CMAKE_CXX_COMPILER /usr/bin/clang++)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -arch ${ios_arch} -std=gnu++11 -stdlib=libc++ -mios-simulator-version-min=${ios_version} -fembed-bitcode -fvisibility=hidden -fvisibility-inlines-hidden -fmodules -fpascal-strings -Os -fno-common -isysroot ${CMAKE_OSX_SYSROOT}" CACHE STRING "Compiler flags")
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -arch ${ios_arch} -mios-simulator-version-min=${ios_version} -fembed-bitcode -fvisibility=hidden -fvisibility-inlines-hidden -fmodules -fpascal-strings -Os -fno-common -isysroot ${CMAKE_OSX_SYSROOT}" CACHE STRING "Compiler flags")
set(CMAKE_SYSTEM_PROCESSOR "i386")